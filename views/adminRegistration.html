<div class="top-logo"><img src="images/logo.png"  /></div>
<div class="top-hat">
    Введите данные для регистрации
</div>
<div class="well" ng-controller="authCtrl">

    <form name="authForm" novalidate>
        <div class="form-group" ng-class="{'has-error':(isused || (validation.username && authForm.username.$invalid))}">
            <label class="la-16">Логин</label>
            <input name="username" class="form-control" ng-model="user.username" ng-blur="validation.username = true" ng-pattern="/^[a-zA-Z0-9]*$/" ng-change="isused = false;" required  />
            <div ng-show="isused">
                <span class="help-block">Такой пользователь уже зарегистрирован</span>
            </div>
            <div ng-show="validation.username">
                <span class="help-block" ng-show="authForm.username.$error.pattern && !authForm.username.$error.required">Только английские символы без пробела</span>
                <span class="help-block" ng-show="authForm.username.$error.required">Введите логин</span>
            </div>
        </div>
        <div class="form-group" ng-class="{'has-error':(user.password != repeatpassword)&&validation.password && validation.repeatpassword}">
            <label class="la-16">Пароль</label>
            <input name="password" type="password" class="form-control"
                   ng-model="user.password" ng-blur="validation.password = true" required />
        </div>
        <div class="form-group" ng-class="{'has-error':(user.password != repeatpassword)&&validation.password && validation.repeatpassword}">
            <label class="la-16">Повторите пароль</label>
            <input name="repeatpassword" type="password" class="form-control"
                   ng-model="repeatpassword" ng-blur="validation.repeatpassword = true" required />
            <div ng-show="validation.password && validation.repeatpassword">
                <span class="help-block" ng-show="user.password != repeatpassword">Пароли не совпадают</span>
            </div>
        </div>
        <div class="form-group" ng-class="{'has-error':((authForm.email.$invalid && validation.email) || isusedmail )}">
            <label class="la-16">Email</label>
            <input type="email" name="email"  class="form-control"
                   ng-model="user.email" ng-blur="validation.email = true" ng-change="isusedmail = false;" required />
            <div ng-show="validation.email">
                <span class="help-block" ng-show="isusedmail">Такой email уже используется</span>
                <span class="help-block" ng-show="authForm.email.$error.required">Укажите свой Email</span>
                <span class="help-block" ng-show="authForm.email.$error.email">Email должен быть другим</span>
            </div>
        </div>
        <div class="text-center">
            <button type="submit" ng-click="registration(user)"
                    ng-disabled="authForm.$invalid || user.password != repeatpassword || !agree"
                    class="btn btn-primary">
                Зарегистрироваться
            </button>
        </div>
        <div class="form-group text-center">
            <label class="agree"><input type="checkbox" ng-model="agree" />Вы соглашайтесь с <a href="http://carsbir.ru/conf" target="_blank">правилами сайта</a></label>
        </div>
    </form>
</div>
